/*! For license information please see survey-demographics-bundle.js.LICENSE.txt */
(()=>{"use strict";var __webpack_modules__={"./assets/demographic_survey.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var mapbox_gl_dist_mapbox_gl_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mapbox-gl/dist/mapbox-gl.css */ "./node_modules/mapbox-gl/dist/mapbox-gl.css");\n/* harmony import */ var _css_settings_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./css/settings.css */ "./assets/css/settings.css");\n/* harmony import */ var _css_map_style_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./css/map_style.css */ "./assets/css/map_style.css");\n/* harmony import */ var _css_alerts_css__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./css/alerts.css */ "./assets/css/alerts.css");\n/* harmony import */ var _css_box_overlays_css__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./css/box_overlays.css */ "./assets/css/box_overlays.css");\n/* harmony import */ var _css_mobile_css__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./css/mobile.css */ "./assets/css/mobile.css");\n/* harmony import */ var _css_survey_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./css/survey.css */ "./assets/css/survey.css");\n/* harmony import */ var _js_api_add_to_database__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./js/api/add_to_database */ "./assets/js/api/add_to_database.js");\n\n\n\n\n\n\n\n\n\n\nconst add_basic_question_to_survey = (question) => {\n  let survey = document.getElementById(question.base_div);\n\n  let qdiv = document.createElement("div");\n  qdiv.className = "question";\n  survey.appendChild(qdiv);\n\n  // add the question\n  let prompt = document.createElement("p");\n  prompt.innerHTML = question.prompt + "<br/>";\n  qdiv.appendChild(prompt);\n\n  // add the options if there are any\n  if (question.options) {\n    // add all of the canned options\n    let counter = 0;\n    question.options.forEach((option) => {\n      counter++;\n\n      // add the label\n      let label = document.createElement("label");\n      label.innerHTML = option + "<br/>";\n      qdiv.appendChild(label);\n\n      // add the input\n      var x = document.createElement("input");\n      x.type = question.type;\n      x.value = option;\n      x.name = question.id;\n      x.id = question.id + "-" + counter;\n\n      label.prepend(x);\n    });\n\n    // add the \'other\' entry box if needed\n    if (question.other) {\n      // add the label\n      let label = document.createElement("label");\n      label.innerHTML = "Other: ";\n      qdiv.appendChild(label);\n\n      // add the checkbox\n      var check = document.createElement("input");\n      check.type = "checkbox";\n      check.id = question.id + "-other-check";\n      label.prepend(check);\n\n      // add the text input\n      var text = document.createElement("input");\n      text.type = "text";\n      text.id = question.id + "-other-text";\n      label.append(text);\n    }\n  }\n\n  // if not options are provided, use a single input\n  else {\n    var x = document.createElement(question.type);\n    x.name = question.id;\n    x.id = question.id;\n\n    qdiv.append(x);\n  }\n\n  //   // add the divider\n  //   qdiv.append(document.createElement("hr"));\n};\n\nlet q1 = {\n  id: "q1",\n  base_div: "questions-about-demographics",\n  prompt: "Are you of Spanish/Hispanic/Latino origin?",\n  type: "radio",\n  other: false,\n  options: ["Yes", "No"],\n  loader_function: add_basic_question_to_survey,\n};\n\nlet q2 = {\n  id: "q2",\n  base_div: "questions-about-demographics",\n  prompt: "With which race do you identify? Select all that apply.",\n  type: "checkbox",\n  other: true,\n  options: [\n    "American Indian, Native American, or Alaska Native",\n    "Asian or Pacific Islander",\n    "Black or African American",\n    "White",\n  ],\n  loader_function: add_basic_question_to_survey,\n};\n\nlet q3 = {\n  id: "q3",\n  base_div: "questions-about-demographics",\n  prompt: "What is your age range?",\n  type: "radio",\n  other: false,\n  options: [\n    "Under 18",\n    "18 - 34",\n    "35 - 44",\n    "45 - 54",\n    "55 - 64",\n    "65 - 74",\n    "75 years or over",\n  ],\n  loader_function: add_basic_question_to_survey,\n};\n\nlet q4 = {\n  id: "q4",\n  base_div: "questions-about-demographics",\n  prompt:\n    "Do you consider yourself someone with a disability that requires mobile assistance, such as a cane, walker, scooter, or wheelchair?",\n  type: "radio",\n  other: false,\n  options: ["Yes", "No"],\n  loader_function: add_basic_question_to_survey,\n};\n\nlet q5 = {\n  id: "q5",\n  base_div: "questions-about-demographics",\n  prompt: "What is your zipcode?",\n  type: "input",\n  other: false,\n  options: false,\n  loader_function: add_basic_question_to_survey,\n};\n\nlet q6 = {\n  id: "q6",\n  base_div: "questions-about-demographics",\n  prompt:\n    "Are you interested in receiving email updates about this project? <br>If so, please provide your email address:",\n  type: "input",\n  other: false,\n  options: false,\n  loader_function: add_basic_question_to_survey,\n};\n[q1, q2, q3, q4, q5, q6].forEach((q) => {\n  q.loader_function(q);\n});\n\n// wire the button click\n\nconst get_multiselect_input = (qid) => {\n  let value = [];\n  let query = \'[id ^= "\' + qid + \'"]\';\n  document.querySelectorAll(query).forEach((el) => {\n    if (el.checked) {\n      if (el.id == qid + "-other-check") {\n        let custom_value = document.getElementById(qid + "-other-text").value;\n        value.push(custom_value);\n      } else {\n        value.push(el.value);\n      }\n    }\n  });\n\n  return value;\n};\n\nconst get_radio_input = (qid) => {\n  let value = "";\n  let query = \'[id ^= "\' + qid + \'"]\';\n\n  document.querySelectorAll(query).forEach((el) => {\n    if (el.checked) {\n      value = el.value;\n    }\n  });\n  return value;\n};\n\nconst get_textarea_input = (qid) => {\n  return document.getElementById(qid).value;\n};\n\nconst get_priority_ranking = (qid) => {\n  let query = \'[id ^= "\' + qid + \'"]\';\n\n  let priorities = ["", "", "", "", ""];\n\n  document.querySelectorAll(query).forEach((el) => {\n    if (el.value != "(select a priority)") {\n      priorities[el.value - 1] = el.nextSibling.textContent;\n    }\n  });\n  console.log(priorities);\n  return priorities;\n};\n\ndocument.getElementById("submit-button").onclick = () => {\n  let data = {\n    q1: get_radio_input("q1"),\n    q2: get_multiselect_input("q2"),\n    q3: get_radio_input("q3"),\n    q4: get_radio_input("q4"),\n    q5: get_textarea_input("q5"),\n    q6: get_textarea_input("q6"),\n  };\n\n  (0,_js_api_add_to_database__WEBPACK_IMPORTED_MODULE_7__.add_user_info_to_database)(data).then(async (response) => {\n    window.location.replace("/thanks");\n  });\n};\n\n\n//# sourceURL=webpack://pins-on-the-map/./assets/demographic_survey.js?')},"./assets/js/api/add_to_database.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "add_comment_to_database": () => (/* binding */ add_comment_to_database),\n/* harmony export */   "add_pin_to_database": () => (/* binding */ add_pin_to_database),\n/* harmony export */   "add_user_info_to_database": () => (/* binding */ add_user_info_to_database),\n/* harmony export */   "add_longform_survey_to_database": () => (/* binding */ add_longform_survey_to_database)\n/* harmony export */ });\nconst add_pin_to_database = async (lngLat) => {\n  let selected_tags = Array.from(document.getElementsByClassName("selected"));\n\n  let data = {\n    geom: `SRID=4326;POINT (${lngLat.lng} ${lngLat.lat})`,\n    prompt_1: document.getElementById("prompt_1").value,\n  };\n\n  selected_tags.forEach((tag) => {\n    let tag_id = tag.id.replace("user-input-", "");\n    data[tag_id] = true;\n  });\n\n  let new_id = -1;\n\n  return fetch("/api/add-pin/", {\n    method: "POST",\n    credentials: "same-origin",\n    headers: {\n      "Content-Type": "application/json",\n    },\n    body: JSON.stringify(data),\n  })\n    .then((response) => {\n      return response.json();\n    })\n    .then((data) => {\n      return data;\n    })\n    .catch((ex) => {\n      console.log("parsing failed", ex);\n    });\n};\n\nconst add_comment_to_database = async (comment) => {\n  let data = {\n    pin_id: document.getElementById("selected-pin-id").innerText,\n    text: comment,\n  };\n\n  return fetch("/api/add-comment/", {\n    method: "POST",\n    credentials: "same-origin",\n    headers: {\n      "Content-Type": "application/json",\n    },\n    body: JSON.stringify(data),\n  })\n    .then((response) => {\n      return response.json();\n    })\n    .then((data) => {\n      return data;\n    })\n    .catch((ex) => {\n      console.log("parsing failed", ex);\n    });\n};\n\nconst add_user_info_to_database = async (user_data) => {\n  return fetch("/api/add-user-info/", {\n    method: "POST",\n    credentials: "same-origin",\n    headers: {\n      "Content-Type": "application/json",\n    },\n    body: JSON.stringify(user_data),\n  })\n    .then((response) => {\n      return response.json();\n    })\n    .then((data) => {\n      return data;\n    })\n    .catch((ex) => {\n      console.log("parsing failed", ex);\n    });\n};\n\nconst add_longform_survey_to_database = async (data) => {\n  return fetch("/api/add-longform-survey/", {\n    method: "POST",\n    credentials: "same-origin",\n    headers: {\n      "Content-Type": "application/json",\n    },\n    body: JSON.stringify(data),\n  })\n    .then((response) => {\n      return response.json();\n    })\n    .then((data) => {\n      return data;\n    })\n    .catch((ex) => {\n      console.log("parsing failed", ex);\n    });\n};\n\n\n\n\n//# sourceURL=webpack://pins-on-the-map/./assets/js/api/add_to_database.js?')},"./assets/css/alerts.css":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n\n\n//# sourceURL=webpack://pins-on-the-map/./assets/css/alerts.css?")},"./assets/css/box_overlays.css":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n\n\n//# sourceURL=webpack://pins-on-the-map/./assets/css/box_overlays.css?")},"./assets/css/map_style.css":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n\n\n//# sourceURL=webpack://pins-on-the-map/./assets/css/map_style.css?")},"./assets/css/mobile.css":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n\n\n//# sourceURL=webpack://pins-on-the-map/./assets/css/mobile.css?")},"./assets/css/settings.css":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n\n\n//# sourceURL=webpack://pins-on-the-map/./assets/css/settings.css?")},"./assets/css/survey.css":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n\n\n//# sourceURL=webpack://pins-on-the-map/./assets/css/survey.css?")},"./node_modules/mapbox-gl/dist/mapbox-gl.css":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n\n\n//# sourceURL=webpack://pins-on-the-map/./node_modules/mapbox-gl/dist/mapbox-gl.css?")}},__webpack_module_cache__={};function __webpack_require__(e){var n=__webpack_module_cache__[e];if(void 0!==n)return n.exports;var t=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](t,t.exports,__webpack_require__),t.exports}__webpack_require__.d=(e,n)=>{for(var t in n)__webpack_require__.o(n,t)&&!__webpack_require__.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},__webpack_require__.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./assets/demographic_survey.js")})();